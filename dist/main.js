!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("resumablejs",[],t):"object"==typeof exports?exports.resumablejs=t():e.resumablejs=t()}(this,(function(){return(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Resumable:()=>d});const r=function(){function e(){}return e.stopEvent=function(e){e.stopPropagation(),e.preventDefault()},e.generateUniqueIdentifier=function(e){var t=e.webkitRelativePath||e.relativePath||e.name;return t=t.replace("/","-"),e.size+"-"+t.replace(/[^0-9a-zA-Z_-]/gim,"")},e.flattenDeep=function(e){var t=this;return Array.isArray(e)?e.reduce((function(e,r){return e.concat(t.flattenDeep(r))}),[]):[e]},e.uniqBy=function(e,t,r){var n=new Set;return e.filter((function(e){var i=t(e);return n.has(i)?(r(e),!1):(n.add(i),!0)}))},e.formatSize=function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},e.assignObject=function(e,t){if("function"==typeof Object.assign)return Object.assign(e,t);if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])}return r},e.toArray=function(e){return function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0)},e.getTarget=function(e,t,r,n,i){void 0===i&&(i="");var s=t;"test"===e&&r&&(s="/"===r?t:r);var o=s.indexOf("?")<0?"?":"&",a=Object.entries(n).map((function(e){var t=e[0],r=e[1];return[encodeURIComponent(i+t),encodeURIComponent(r)].join("=")})).join("&");return a&&(s=s+o+a),s},e}();var n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};const i=function(){function e(){this.registeredEventHandlers={}}return e.prototype.on=function(e,t){e=e.toLowerCase(),this.registeredEventHandlers.hasOwnProperty(e)||(this.registeredEventHandlers[e]=[]),this.registeredEventHandlers[e].push(t)},e.prototype.fire=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e=e.toLowerCase(),this.executeEventCallback.apply(this,n([e],t,!1)),this.executeEventCallback.apply(this,n(["*",e],t,!1))},e.prototype.executeEventCallback=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.registeredEventHandlers.hasOwnProperty(e)&&this.registeredEventHandlers[e].forEach((function(e){return e.apply(void 0,t)}))},e}();var s,o=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};const u=function(e){function t(t,r,n){var i=e.call(this)||this;return i.lastProgressCallback=new Date,i.tested=!1,i.retries=0,i.pendingRetry=!1,i.isMarkedComplete=!1,i.loaded=0,i.xhr=null,i.chunkSize=1048576,i.forceChunkSize=!1,i.fileParameterName="file",i.chunkNumberParameterName="resumableChunkNumber",i.chunkSizeParameterName="resumableChunkSize",i.currentChunkSizeParameterName="resumableCurrentChunkSize",i.totalSizeParameterName="resumableTotalSize",i.typeParameterName="resumableType",i.identifierParameterName="resumableIdentifier",i.fileNameParameterName="resumableFilename",i.relativePathParameterName="resumableRelativePath",i.totalChunksParameterName="resumableTotalChunks",i.throttleProgressCallbacks=.5,i.query={},i.headers={},i.method="multipart",i.uploadMethod="POST",i.testMethod="GET",i.parameterNamespace="",i.testChunks=!0,i.maxChunkRetries=100,i.chunkRetryInterval=void 0,i.permanentErrors=[400,401,403,404,409,415,500,501],i.withCredentials=!1,i.xhrTimeout=0,i.chunkFormat="blob",i.setChunkTypeFromFile=!1,i.target="/",i.testTarget="",i.setInstanceProperties(n),i.fileObj=t,i.fileObjSize=t.size,i.fileObjType=t.file.type,i.offset=r,i.startByte=i.offset*i.chunkSize,i.endByte=Math.min(i.fileObjSize,(i.offset+1)*i.chunkSize),i.fileObjSize-i.endByte<i.chunkSize&&!i.forceChunkSize&&(i.endByte=i.fileObjSize),i.xhr=null,i}return o(t,e),t.prototype.setInstanceProperties=function(e){r.assignObject(this,e)},t.prototype.setCustomHeaders=function(){if(this.xhr){var e=this.headers;for(var t in e instanceof Function&&(e=e(this.fileObj,this)),e)e.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,e[t])}},Object.defineProperty(t.prototype,"formattedQuery",{get:function(){var e,t=this.query;"function"==typeof t&&(t=t(this.fileObj,this));var r=((e={})[this.chunkNumberParameterName]=this.offset+1,e[this.chunkSizeParameterName]=this.chunkSize,e[this.currentChunkSizeParameterName]=this.endByte-this.startByte,e[this.totalSizeParameterName]=this.fileObjSize,e[this.typeParameterName]=this.fileObjType,e[this.identifierParameterName]=this.fileObj.uniqueIdentifier,e[this.fileNameParameterName]=this.fileObj.fileName,e[this.relativePathParameterName]=this.fileObj.relativePath,e[this.totalChunksParameterName]=this.fileObj.chunks.length,e);return a(a({},r),t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.pendingRetry?"chunkUploading":this.isMarkedComplete?"chunkSuccess":this.xhr?this.xhr.readyState<4?"chunkUploading":200===this.xhr.status||201===this.xhr.status?"chunkSuccess":this.permanentErrors.includes(this.xhr.status)||this.retries>=this.maxChunkRetries?"chunkError":(this.abort(),"chunkPending"):"chunkPending"},enumerable:!1,configurable:!0}),t.prototype.getTarget=function(e){return r.getTarget(e,this.target,this.testTarget,this.formattedQuery,this.parameterNamespace)},t.prototype.test=function(){var e=this;this.xhr=new XMLHttpRequest;var t=function(){e.tested=!0,"chunkSuccess"===e.status?e.fire("chunkSuccess",e.message()):e.send()};this.xhr.addEventListener("load",t,!1),this.xhr.addEventListener("error",t,!1),this.xhr.addEventListener("timeout",t,!1),this.xhr.open(this.testMethod,this.getTarget("test")),this.xhr.timeout=this.xhrTimeout,this.xhr.withCredentials=this.withCredentials,this.setCustomHeaders(),this.xhr.send(null)},t.prototype.abort=function(){this.xhr&&this.xhr.abort(),this.xhr=null},t.prototype.send=function(){var e=this;if(!this.testChunks||this.tested){this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",(function(t){Date.now()-e.lastProgressCallback.getTime()>1e3*e.throttleProgressCallbacks&&(e.fire("chunkProgress"),e.lastProgressCallback=new Date),e.loaded=t.loaded||0}),!1),this.loaded=0,this.pendingRetry=!1,this.fire("chunkProgress");var t=function(){var t=e.status;switch(t){case"chunkSuccess":case"chunkError":e.fire(t,e.message());break;default:e.fire("chunkRetry",e.message()),e.abort(),e.retries++;var r=e.chunkRetryInterval;void 0!==r?(e.pendingRetry=!0,setTimeout(e.send,r)):e.send()}};this.xhr.addEventListener("load",t,!1),this.xhr.addEventListener("error",t,!1),this.xhr.addEventListener("timeout",t,!1);var r=this.fileObj.file.slice(this.startByte,this.endByte,this.setChunkTypeFromFile?this.fileObj.file.type:""),n=null,i=this.parameterNamespace;if("octet"===this.method)n=r;else{for(var s in n=new FormData,this.formattedQuery)n.append(i+s,this.formattedQuery[s]);switch(this.chunkFormat){case"blob":n.append(i+this.fileParameterName,r,this.fileObj.fileName);break;case"base64":var o=new FileReader;o.onload=function(){n.append(i+e.fileParameterName,o.result),e.xhr.send(n)},o.readAsDataURL(r)}}var a=this.getTarget("upload");this.xhr.open(this.uploadMethod,a),"octet"===this.method&&this.xhr.setRequestHeader("Content-Type","application/octet-stream"),this.xhr.timeout=this.xhrTimeout,this.xhr.withCredentials=this.withCredentials,this.setCustomHeaders(),"blob"===this.chunkFormat&&this.xhr.send(n)}else this.test()},t.prototype.message=function(){return this.xhr?this.xhr.responseText:""},t.prototype.progress=function(e){void 0===e&&(e=!1);var t=e?(this.endByte-this.startByte)/this.fileObjSize:1;if(this.pendingRetry)return 0;switch(this.xhr&&this.xhr.status||this.isMarkedComplete||(t*=.95),this.status){case"chunkSuccess":case"chunkError":return t;case"chunkPending":return 0;default:return this.loaded/(this.endByte-this.startByte)*t}},t.prototype.markComplete=function(){this.isMarkedComplete=!0},t}(i);var l=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const c=function(e){function t(t,r,n){var i=e.call(this)||this;return i._prevProgress=0,i.isPaused=!1,i.chunks=[],i.chunkSize=1048576,i.forceChunkSize=!1,i.opts=n,i.setInstanceProperties(n),i.file=t,i.fileName=t.name,i.size=t.size,i.relativePath=t.webkitRelativePath||i.fileName,i.uniqueIdentifier=r,i._error=void 0!==r,i.fire("chunkingStart",i),i.bootstrap(),i}return l(t,e),t.prototype.setInstanceProperties=function(e){r.assignObject(this,e)},t.prototype.abort=function(){for(var e=0,t=0,r=this.chunks;t<r.length;t++){var n=r[t];"chunkUploading"===n.status&&(n.abort(),e++)}e>0&&this.fire("fileProgress",this)},t.prototype.cancel=function(){for(var e=0,t=this.chunks;e<t.length;e++){var r=t[e];"chunkUploading"===r.status&&(r.abort(),this.fire("chunkCancel",r))}this.chunks=[],this.fire("fileCancel",this),this.fire("fileProgress",this)},t.prototype.retry=function(){var e=this;this.bootstrap();var t=!1;this.on("chunkingComplete",(function(){t||e.fire("fileRetry"),t=!0}))},t.prototype.bootstrap=function(){var e=this,t=function(t){return e.fire("fileProgress",e,t)},r=function(){return e.fire("fileRetry",e)},n=function(t){e._error||(e.fire("chunkSuccess"),e.fire("fileProgress",e,t),e.isComplete&&e.fire("fileSuccess",e,t))},i=function(t){e.fire("chunkError",t),e.abort(),e._error=!0,e.chunks=[],e.fire("fileError",e,t)};this.abort(),this._error=!1,this.chunks=[],this._prevProgress=0;for(var s=this.forceChunkSize?Math.ceil:Math.floor,o=Math.max(s(this.file.size/this.chunkSize),1),a=0;a<o;a++){var l=new u(this,a,this.opts);l.on("chunkProgress",t),l.on("chunkError",i),l.on("chunkSuccess",n),l.on("chunkRetry",r),this.chunks.push(l),this.fire("chunkingProgress",this,a/o)}this.fire("chunkingComplete",this)},t.prototype.progress=function(){if(this._error)return 1;for(var e=0,t=!1,r=0,n=this.chunks;r<n.length;r++){var i=n[r];"chunkError"===i.status&&(t=!0),e+=i.progress(!0)}return e=t||e>.99999?1:e,e=Math.max(this._prevProgress,e),this._prevProgress=e,e},Object.defineProperty(t.prototype,"isUploading",{get:function(){return this.chunks.some((function(e){return"chunkUploading"===e.status}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return!this.chunks.some((function(e){return"chunkPending"===e.status||"chunkUploading"===e.status}))},enumerable:!1,configurable:!0}),t.prototype.upload=function(){if(this.isPaused)return!1;for(var e=0,t=this.chunks;e<t.length;e++){var r=t[e];if("chunkPending"===r.status)return r.send(),!0}return!1},t.prototype.markChunksCompleted=function(e){if(this.chunks&&!(this.chunks.length<=e))for(var t=0;t<e;t++)this.chunks[t].markComplete()},t}(i);var h=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))},p=function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},d=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.files=[],n.validators={},n.clearInput=!0,n.dragOverClass="dragover",n.fileTypes=[],n.fileTypeErrorCallback=function(e){alert("".concat(e.fileName||e.name," has an unsupported file type, please upload files of type ").concat(n.fileTypes,"."))},n._generateUniqueIdentifier=null,n.maxFileSizeErrorCallback=function(e){alert(e.fileName||e.name+" is too large, please upload files less than "+r.formatSize(n.maxFileSize)+".")},n.maxFilesErrorCallback=function(e){var t=n.maxFiles;alert("Please upload no more than "+t+" file"+(1===t?"":"s")+" at a time.")},n.minFileSize=1,n.minFileSizeErrorCallback=function(e){alert(e.fileName||e.name+" is too small, please upload files larger than "+r.formatSize(n.minFileSize)+".")},n.prioritizeFirstAndLastChunk=!1,n.fileValidationErrorCallback=function(e){},n.simultaneousUploads=3,n.setInstanceProperties(t),n.opts=t,n.checkSupport(),n}return h(t,e),t.prototype.checkSupport=function(){if(this.support=void 0!==File&&void 0!==Blob&&void 0!==FileList&&!!Blob.prototype.slice,!this.support)throw new Error("Not supported by Browser")},t.prototype.setInstanceProperties=function(e){r.assignObject(this,e),this.fileTypes=this.fileTypes.map((function(e){return e.replace(/[\s.]/g,"").toLowerCase()}))},t.prototype.mapDirectoryItemToFile=function(e,t){return f(this,void 0,void 0,(function(){var r;return p(this,(function(n){switch(n.label){case 0:return e.isFile?[4,new Promise((function(t,r){return e.file(t,r)}))]:[3,2];case 1:return(r=n.sent()).relativePath=t+r.name,[2,[r]];case 2:return e.isDirectory?[4,this.processDirectory(e,t+e.name+"/")]:[3,4];case 3:return[2,n.sent()];case 4:if(e instanceof File)return[2,[e]];n.label=5;case 5:return console.warn("Item mapping did not return a file object. This might be due to an unknown file type."),[2,[]]}}))}))},t.prototype.mapDragItemToFile=function(e,t){return f(this,void 0,void 0,(function(){var r,n;return p(this,(function(i){switch(i.label){case 0:return(r=e.webkitGetAsEntry()).isDirectory?[4,this.processDirectory(r,t+r.name+"/")]:[3,2];case 1:return[2,i.sent()];case 2:return(n=e.getAsFile())instanceof File?(n.relativePath=t+n.name,[2,[n]]):(console.warn("Item mapping did not return a file object. This might be due to an unknown file type."),[2,[]])}}))}))},t.prototype.processDirectory=function(e,t){var r=this;return new Promise((function(n,i){var s=e.createReader(),o=[],a=function(){s.readEntries((function(e){return f(r,void 0,void 0,(function(){var r,i=this;return p(this,(function(s){switch(s.label){case 0:return e.length?(o=o.concat(e),[2,a()]):(o=o.map((function(e){return i.mapDirectoryItemToFile(e,t)})),r=n,[4,Promise.all(o)]);case 1:return r.apply(void 0,[s.sent()]),[2]}}))}))}),i)};a()}))},t.prototype.onDrop=function(e){return f(this,void 0,void 0,(function(){var t,n,i,s,o,a=this;return p(this,(function(u){switch(u.label){case 0:return e.currentTarget.classList.remove(this.dragOverClass),r.stopEvent(e),t=[],e.dataTransfer&&e.dataTransfer.items?t=r.toArray(e.dataTransfer.items):e.dataTransfer&&e.dataTransfer.files&&(t=r.toArray(e.dataTransfer.files)),t.length?(this.fire("fileProcessingBegin",t),n=t.map((function(e){return a.mapDragItemToFile(e,"")})),o=(s=r).flattenDeep,[4,Promise.all(n)]):[2];case 1:return(i=o.apply(s,[u.sent()])).length&&this.appendFilesFromFileList(i,e),[2]}}))}))},t.prototype.onDragLeave=function(e){e.currentTarget.classList.remove(this.dragOverClass)},t.prototype.onDragOverEnter=function(e){e.preventDefault();var t=e.dataTransfer;t.types.includes("Files")?(e.stopPropagation(),t.dropEffect="copy",t.effectAllowed="copy",e.currentTarget.classList.add(this.dragOverClass)):(t.dropEffect="none",t.effectAllowed="none")},t.prototype.validateFiles=function(e){return f(this,void 0,void 0,(function(){var t,n,i,s=this;return p(this,(function(o){switch(o.label){case 0:return t=r.uniqBy(e,(function(e){return e.uniqueIdentifier}),(function(e){return s.fire("fileProcessingFailed",e,"duplicate")})),n=t.map((function(e){return f(s,void 0,void 0,(function(){var t,r,n;return p(this,(function(i){switch(i.label){case 0:return this.files.some((function(t){return t.uniqueIdentifier===e.uniqueIdentifier}))?(this.fire("fileProcessingFailed",e,"duplicate"),[2,!1]):(t=e.type.toLowerCase(),r=e.name.split(".").pop().toLowerCase(),this.fileTypes.length>0&&!this.fileTypes.some((function(e){return r===e||e.includes("/")&&(e.includes("*")&&t.substring(0,e.indexOf("*"))===e.substring(0,e.indexOf("*"))||t===e)}))?(this.fire("fileProcessingFailed",e,"fileType"),this.fileTypeErrorCallback(e),[2,!1]):void 0!==this.minFileSize&&e.size<this.minFileSize?(this.fire("fileProcessingFailed",e,"minFileSize"),this.minFileSizeErrorCallback(e),[2,!1]):void 0!==this.maxFileSize&&e.size>this.maxFileSize?(this.fire("fileProcessingFailed",e,"maxFileSize"),this.maxFileSizeErrorCallback(e),[2,!1]):(n=r in this.validators)?[4,this.validators[r](e)]:[3,2]);case 1:n=!i.sent(),i.label=2;case 2:return n?(this.fire("fileProcessingFailed",e,"validation"),this.fileValidationErrorCallback(e),[2,!1]):[2,!0]}}))}))})),[4,Promise.all(n)];case 1:return i=o.sent(),[2,e.filter((function(e,t){return i[t]}))]}}))}))},t.prototype.appendFilesFromFileList=function(e,t){return f(this,void 0,void 0,(function(){var r,n,i,s,o,a,u,l=this;return p(this,(function(h){switch(h.label){case 0:if(void 0!==this.maxFiles&&this.maxFiles<e.length+this.files.length){if(1!==this.maxFiles||1!==this.files.length||1!==e.length)return this.fire("fileProcessingFailed",void 0,"maxFiles"),this.maxFilesErrorCallback(e),[2,!1];this.removeFile(this.files[0])}return[4,Promise.all(e.map((function(e){return f(l,void 0,void 0,(function(){var r;return p(this,(function(n){switch(n.label){case 0:return r=e,[4,this.generateUniqueIdentifier(e,t)];case 1:return r.uniqueIdentifier=n.sent(),[2,e]}}))}))})))];case 1:return r=h.sent(),[4,this.validateFiles(r)];case 2:for(n=h.sent(),i=r.filter((function(e){return!n.includes(e)})),s=0,o=n;s<o.length;s++)a=o[s],(u=new c(a,a.uniqueIdentifier,this.opts)).on("chunkSuccess",(function(){return l.handleChunkSuccess()})),u.on("chunkError",(function(){return l.handleChunkError()})),u.on("chunkCancel",(function(){return l.handleChunkCancel()})),u.on("fileProgress",(function(){return l.handleFileProgress()})),u.on("fileError",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.handleFileError(e)})),u.on("fileSuccess",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.handleFileSuccess(e)})),u.on("fileCancel",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.handleFileCancel(e)})),u.on("fileRetry",(function(){return l.handleFileRetry()})),this.files.push(u),this.fire("fileAdded",u,t);return n.length||i.length?(this.fire("filesAdded",n,i),[2]):[2]}}))}))},t.prototype.generateUniqueIdentifier=function(e,t){return"function"==typeof this._generateUniqueIdentifier?this._generateUniqueIdentifier(e,t):r.generateUniqueIdentifier(e)},t.prototype.uploadNextChunk=function(){if(this.prioritizeFirstAndLastChunk)for(var e=0,t=this.files;e<t.length;e++){if((i=t[e]).chunks.length&&"chunkPending"===i.chunks[0].status)return void i.chunks[0].send();if(i.chunks.length>1&&"chunkPending"===i.chunks[i.chunks.length-1].status)return void i.chunks[i.chunks.length-1].send()}for(var r=0,n=this.files;r<n.length;r++){var i;if((i=n[r]).upload())return}},t.prototype.assignBrowse=function(e,t){void 0===t&&(t=!1),e instanceof HTMLElement&&(e=[e]);for(var r=function(e){var r;e instanceof HTMLInputElement&&"file"===e.type?r=e:((r=document.createElement("input")).setAttribute("type","file"),r.style.display="none",e.addEventListener("click",(function(){r.style.opacity=0,r.style.display="block",r.focus(),r.click(),r.style.display="none"}),!1),e.appendChild(r)),1!==n.maxFiles?r.setAttribute("multiple","multiple"):r.removeAttribute("multiple"),t?r.setAttribute("webkitdirectory","webkitdirectory"):r.removeAttribute("webkitdirectory"),n.fileTypes.length>=1?r.setAttribute("accept",n.fileTypes.map((function(e){return(e=e.replace(/\s/g,"").toLowerCase()).match(/^[^.][^/]+$/)&&(e="."+e),e})).join(",")):r.removeAttribute("accept"),r.addEventListener("change",n.handleChangeEvent.bind(n),!1)},n=this,i=0,s=e;i<s.length;i++)r(s[i])},t.prototype.assignDrop=function(e){e instanceof HTMLElement&&(e=[e]);for(var t=0,r=e;t<r.length;t++){var n=r[t];n.addEventListener("dragover",this.onDragOverEnter.bind(this),!1),n.addEventListener("dragenter",this.onDragOverEnter.bind(this),!1),n.addEventListener("dragleave",this.onDragLeave.bind(this),!1),n.addEventListener("drop",this.onDrop.bind(this),!1)}},t.prototype.unAssignDrop=function(e){e instanceof HTMLElement&&(e=[e]);for(var t=0,r=e;t<r.length;t++){var n=r[t];n.removeEventListener("dragover",this.onDragOverEnter.bind(this)),n.removeEventListener("dragenter",this.onDragOverEnter.bind(this)),n.removeEventListener("dragleave",this.onDragLeave.bind(this)),n.removeEventListener("drop",this.onDrop.bind(this))}},Object.defineProperty(t.prototype,"isUploading",{get:function(){return this.files.some((function(e){return e.isUploading}))},enumerable:!1,configurable:!0}),t.prototype.upload=function(){if(!this.isUploading){this.fire("uploadStart");for(var e=1;e<=this.simultaneousUploads;e++)this.uploadNextChunk()}},t.prototype.pause=function(){for(var e=0,t=this.files;e<t.length;e++)t[e].abort();this.fire("pause")},t.prototype.cancel=function(){this.fire("beforeCancel");for(var e=this.files.length-1;e>=0;e--)this.files[e].cancel();this.fire("cancel")},t.prototype.progress=function(){var e=this.files.reduce((function(e,t){return e+t.size*t.progress()}),0),t=this.getSize();return t>0?e/t:0},t.prototype.addFile=function(e,t){this.appendFilesFromFileList([e],t)},t.prototype.addFiles=function(e,t){this.appendFilesFromFileList(e,t)},t.prototype.addFileValidator=function(e,t){e in this.validators&&console.warn("Overwriting validator for file type: ".concat(e)),this.validators[e]=t},t.prototype.removeFile=function(e){for(var t=this.files.length-1;t>=0;t--)if(this.files[t]===e){this.files.splice(t,1);break}},t.prototype.getFromUniqueIdentifier=function(e){return this.files.find((function(t){return t.uniqueIdentifier===e}))},t.prototype.getSize=function(){return this.files.reduce((function(e,t){return e+t.size}),0)},t.prototype.handleDropEvent=function(e){this.onDrop(e)},t.prototype.handleChangeEvent=function(e){var t=e.target;this.fire("fileProcessingBegin",t.files),this.appendFilesFromFileList(r.toArray(t.files),e),this.clearInput&&(t.value="")},t.prototype.checkUploadComplete=function(){this.files.every((function(e){return e.isComplete}))&&this.fire("complete")},t.prototype.handleChunkSuccess=function(){this.uploadNextChunk()},t.prototype.handleChunkError=function(){this.uploadNextChunk()},t.prototype.handleChunkCancel=function(){this.uploadNextChunk()},t.prototype.handleFileError=function(e){this.fire("error",e[1],e[0])},t.prototype.handleFileSuccess=function(e){this.fire.apply(this,function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}(["fileSuccess"],e,!1)),this.checkUploadComplete()},t.prototype.handleFileProgress=function(){this.fire("progress")},t.prototype.handleFileCancel=function(e){this.removeFile(e[0])},t.prototype.handleFileRetry=function(){this.upload()},t}(i);return t})()}));
//# sourceMappingURL=main.js.map